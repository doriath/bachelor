\chapter{Introduction}

With the increase of usage and importance of Internet services in everyday life, there also increases demand on service reliability and constant availability.
Providing these features to the services is a complex matter, involving a trade-off between user satisfaction and service resource demands.

The most common and effective method of providing reliable services is replication. Applying the replication requires only minor changes for non-replicated service to become replicated one. Thus, this method is usable both for developing new services using well known design patterns as well as transforming existing services into replicated ones.

Each replication approach relies on some group communication mechanism, usually providing strong guarantees. For example, the total-order (atomic) broadcast is a very useful for interconnecting replicas -- it simplifies the design and implementation of the replication protocols, as it allows for dividing the system into two main modules with clearly visible responsibilities.

We have chosen to implement one of the replication approaches -- one that we think is very promising.
It is called active replication. In this approach, each service replica does the same work. The replicas must behave identically and therefore we require the service to behave deterministically.

Every library for replicating services should address its main purpose, i.e. to guarantee high availability of service as well as durability of the service work results.

% TODO something about Paxos - (JPaxos is using Paxos / MultiPaxos as algorithm for solving consensus problem?)

\begin{minipageWithIndent}{0.9\textwidth}
{
\bfseries

The goal of this bachelor's thesis is to implement JPaxos -- Java library and runtime system for efficient service replication.

JPaxos requires deterministic behaviour from the service, does not accept replica misbehaviour and works with static group of replicas.

JPaxos allows for replica crashes as well as recovering the crashed replicas, ensures the durability in spite of the failures, including failure of all the replicas at once. It provides the availability of service if the majority of replicas are correct.
}
\end{minipageWithIndent}

\section{Thesis organization}

% TODO JK - napiszesz to ?

In the opening chapter we shortly characterize articles concerning Paxos algorithm and present the most significant definitions as well as theoretical results concerning Paxos.

The second chapter provides description of Paxos algorithm, including some modifications to the core algorithm.

In chapter 3 we describe the design of JPaxos -- its architecture, modules, important data structures and threading model.

Implemented features, chapter 4, is devoted to the implementation work related to the state machine replication, including the snapshotting, catch-up and proper achieving transparency for the service.

Fifth chapter contains description of optimisations we used in order to acheive better performance of the library.

Chapter 6 describes recovery related issues, both for Paxos and for the service replication.

The last chapter concludes the thesis.


\section{Related work}

The Paxos and MultiPaxos algorithm have been proposed by L. Lamport in \textit{The Part-Time Parliament}~\cite{Lam98}. Since the article presented the algorithm in quite specific form, the Paxos protocol has been described again by Lamport in \textit{Paxos Made Simple}~\cite{Lam01}.

Since then the Paxos protocol has been described from the theoretical point of view. Improvements and their proofs of correctness were presented as well as behaviour with byzantine crashes has been characterized.

Some of the first real-world Paxos applications have been described in 2006 and 2007 (\textit{Paxos made live}~\cite{CGR07}). The articles describe certain implementation issues concerning the Paxos algorithm in the Chubby distributed filesystem developed at Google.

A year later, in \textit{Paxos for system builders}~\cite{AK08}, the Paxos protocol has been described from programmer point of view.

In 2009, and subsequently in 2010, M. Primi et al. released two implementations of Paxos designed to achieve good performance. Both of these implementations have been released as open-source. The first -- libPaxos$^2$ -- is described in Primi's master thesis, the latter -- RingPaxos -- is described in \textit{Ring Paxos: A High-Throughput Atomic Broadcast Protocol}~\cite{Mar10}.

The crash-recovery model has also been the subject of many research papers. The \textit{Atomic Broadcast in Asynchronous Crash-Recovery Distributed Systems}~\cite{rodriguez2000atomic} provides definitions concerning recovery as well as shows a method to transform any crash-stop consensus protocol to the crash-recovery one.

A summary of the crash-recovery approaches for the Paxos algorithm can be found in N. Santos technical report~\cite{Nun10}. All algorithms implemented by us are described there.

\section{Contributions}

Jan Kończak for the purpose of this thesis has prepared the design and implementation of:
\begin{tightList}
  \item[\textbullet] catch-up module (Section \ref{sec:catch_up}),
  \item[\textbullet] snapshotting module (Section \ref{sec:snapshotting}),
  \item[\textbullet] service proxy  (Section \ref{sec:serviceProxy}),
  \item[\textbullet] benchmark project.
\end{tightList}

\noindent Tomasz Żurkowski has prepared the design and implementation of:
\begin{tightList}
  \item[\textbullet] unit tests for JPaxos project,
  \item[\textbullet] client manager module, 
  \item[\textbullet] network module for communication between replicas,
  \item[\textbullet] view based recovery (Section \ref{sec:view_ss}),
  \item[\textbullet] disc writers for full stable storage recovery.
\end{tightList}

\noindent The remaining modules were the result of our joint work.
